# Cosmos DB scenario-based labs - IoT

## 12. Create an Azure Machine Learning (ML) Model to Predict whether Maintenance will be needed in the next 30 days

**Duration**: 60 minutes

<!-- TOC -->
- [Task 1: Access the Azure ML Studio](#task-1-access-the-azure-ml-studio)
- [Task 2: Provision Azure ML Compute Resources](#task-2-provision-azure-ml-compute-resources)
- [Task 3: Azure ML Experiment](#task-3-azure-ml-experiment)
<!-- /TOC -->

In this exercise, you will create an Azure Machine Learning (ML) model using the visual Azure ML Designer, then deploy batch and real-time inferencing pipelines. Then you will expose the real-time inferencing pipeline via a REST API endpoint.

### Task 1: Access the Azure ML Studio

In your Resource Group, select the Azure Machine Learning resource.

![Select the Machine Learning resource.](../media/aml-rg.png 'Select the Machine Learning resource.')

On the Overview blade, navigate to the ML Studio by selecting either the "Studio web URL" or the "Launch studio" button.

![Navigate to the ML Studio.](../media/aml-overview.png 'Navigate to the ML Studio.')

You will complete the remaining tasks in this exercise in the Azure ML Studio.

![Azure ML Studio Home.](../media/aml-studio.png 'Azure ML Studio Home.')


### Task 2: Provision Azure ML Compute Resources

>**NOTE: IF YOU USED THE DEMO DEPLOYMENT, SKIP THIS TASK - CONTINUE WITH [TASK 3](#task-3-azure-ml-experiment)**

In this task, you will provision compute resources for Azure ML training and real-time inferencing.

The trained model will be deployed to the real-time inferencing compute resource, where it will expose a REST endpoint that the web app will call to get maintenance predictions.

In the left navigation bar, select **Compute**. Select the **Compute clusters** tab. Then select **+New**.

![Create a new Compute cluster for training.](../media/aml-compute-train1.png 'Create a new Compute cluster for training.')

Enter a name for the compute resource, such as "ml-train". Enter a maximum number of compute nodes. A maximum of 1 is adequate for this task. Then select **Create**. The compute resource will take a few minutes to deploy. You can continue working while it deploys.

![Configure new Compute cluster for training.](../media/aml-compute-train2.png 'Configure new Compute cluster for training.')

Next, select the **Inference clusters** tab. Then select **+New**.

![Create a new real-time inference cluster.](../media/aml-compute-inf1.png 'Create a new real-time inference cluster.')

Enter a name for the compute resource, such as "ml-inf". The remaining defaults should be adequate, though you may need to select an Azure region with available quota for the needed Virtual Machine sizes.

Then select **Create**. The compute resource will take a few minutes to deploy. You can continue working while it deploys.

![Configure new Compute cluster for inference.](../media/aml-compute-inf2.png 'Configure new Compute cluster for inference.')

After a few minutes, the **Compute clusters** and **Inference clusters** tabs will show the completed provisioning of the compute resources. You can continue with the next task while the compute resources are still provisioning.

### Task 3: Azure ML Experiment

